<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <script src="http://localhost:18166/lib/knockout/knockout-3.4.0.js"></script>
    <title></title>
    <script type="text/javascript">
        var vm = (function () {
            function person() {
                this._fullName = ko.observable('王五');
                this._age = 20;
                this._externalName = 'js externalName';
            }

            

            Object.defineProperty(person.prototype, "fullName", {
                get: function () {
                    return this._fullName();
                },
                enumerable: true,
                configurable: true
            });

            Object.defineProperty(person.prototype, "fullNameW", {
                set: function (newName) {
                    this._fullName(newName);
                },
                enumerable: true,
                configurable: true
            });

            //Object.defineProperty(person.prototype, "age", {
            //    get: function () {
            //        return this._fullName;
            //    },
            //    enumerable: true,
            //    configurable: true
            //});
            //Object.defineProperty(person.prototype, "ageW", {
            //    set: function (newName) {
            //        this._fullName = newName;
            //    },
            //    enumerable: true,
            //    configurable: true
            //});

            return person;
        }());

        var per = new vm();
        window.onload = function () {
            ko.applyBindings(per);
        }


        //alert(window.external.PeripheringDevice.GetExternalName());

        //var vm = function () {
        //    this.fullName = ko.observable("koname");
        //}

        var key = window.external.PeripheringDevice.OnExternalEvent = function (name) {
            per.fullNameW = name;
            alert(per.fullName);
        }

        //window.external.PeripheringDevice.AddJavaScriptListener(function (name) {

        //    per.fullNameW = name;
        //    alert(per.fullName);
        //})


        //function change() {
        //    per.fullNameW = '动态改变';
        //    alert(per.fullName);
        //}

        //ko.applyBindings(new vm());


        //var ViewModel = function (first, last) {
        //    this.firstName = ko.observable(first);
        //    this.lastName = ko.observable(last);
        //};

        //ko.applyBindings(new ViewModel("Planet", "Earth"));
    </script>
</head>
<body>
    <!--<input type="text" class="form-control"  data-bind="value:fullName">-->
    <!--<input type="text" id="txt1" value="" />-->
    <!--<button type="button" onclick="change()">测试</button>-->


    <p>First name: <input data-bind="value:per.fullName" /></p>
    
    <p>externalName: <input data-bind="value:per.externalName" /></p>
    <!--<p>Last name: <input data-bind="value: lastName" /></p>-->


</body>
</html>